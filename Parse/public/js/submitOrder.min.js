$(function(){function e(e,a){var o=[],n=0;for(i=0;i<e.length;i++)if(e[i]!=a[i]){var s;switch(a[i]){case"Chocolate Chip Cookies":case"Condoms":s=50;break;case"Snickers":s=100;break;case"Red Bull":s=200}o[i]=parseInt(e[i].charAt(0))*s,n+=o[i]}else o[i]=0;t=n;var c=n.toString();r=n>=1e3?"$"+c.substr(0,2)+"."+c.substr(2):0==n?"$0.00":100>n?"$0."+c:"$"+c.substr(0,1)+"."+c.substr(1)}function a(e,a){var o=[],n=[],s=[];for(i=0;i<e.length;i++)if(e[i]!=a[i]){switch(o[i]=parseInt(-1*e[i].charAt(0)),a[i]){case"Chocolate Chip Cookies":n[i]="Cookie",s[i]="Cw88sZHIZy";break;case"Condoms":n[i]="Condom",s[i]="OFlBAvSjpD";break;case"Red Bull":n[i]="Drink",s[i]="yTFc0JXOV4";break;case"Snickers":n[i]="Candy",s[i]="dOWFhzLe0l"}$.post("/inventory/update",{itemType:n[i],item:a[i],changeValue:o[i],id:s[i]},function(){console.log("Inventory Updated")})}}function o(e){var a,o=" left!)</r>",n="#"+e,s="";$.get("/inventory/request",{id:e},function(e){switch(a=e.remaining,s+=e.elementId,a){case 4:o="<r> (4"+o,$(n).append(o);break;case 3:o="<r> (3"+o,$(n).append(o);break;case 2:o="<r> (2"+o,$(n).append(o);break;case 1:o="<r> (1"+o,$(n).append(o);break;case 0:o="<r> (all gone!)</r>",$(n).append(o),$(s).attr("disabled","disabled")}})}function n(){$("#totalText").addClass("pulse animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse animated")})}function s(e){e+=300;var a=e.toString();r="$"+a.substr(0,1)+"."+a.substr(1)}var r="$0.00",t=0,c=!1,l=!1,d=["Chocolate Chip Cookies","Red Bull","Snickers","Condoms"],h=["Cw88sZHIZy","yTFc0JXOV4","dOWFhzLe0l","OFlBAvSjpD"];for(i=0;i<d.length;i++)o(h[i]);$(".form").submit(function(e){e.preventDefault(),e.stopPropagation();var o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad"></span>',n='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad2"></span>',s=$("#phoneNumber").val(),t=$("#location").val(),h=$("#chipCookies").val(),p=$("#redBull").val(),k=$("#condoms").val(),v=$("#snickers").val(),m=[h,p,v,k],b="";for(i=0;i<d.length;i++)d[i]!=m[i]&&(b+=m[i],i+1<d.length&&(b+=", "));c===!0&&l===!0&&b?(a(m,d),$.post("/order/new",{location:t,orderList:b,phoneNumber:s,total:r},function(){console.log("POST success")}),window.location.replace("http://heysweetd.com/thanks")):c===!1&&l===!1?(alert("Please enter a valid phone number and location!"),$("#bad").remove(),$("#bad2").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(n)):c===!1?(alert("Please enter a valid phone number!"),$("#bad").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o)):l===!1?(alert("Please enter a valid location!"),$("#bad2").remove(),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(n)):b||alert("You have no order! Please select items for delivery.")}),$("select").change(function(){var a=$("#chipCookies").val(),o=$("#redBull").val(),i=$("#condoms").val(),c=$("#snickers").val(),l=[a,o,c,i],h='<p id="deliveryFee" style="margin-bottom: 20px;">Delivery fee: <r>$3.00</r></p>';e(l,d),"$0.00"!=r?500>t?(s(t),$("#deliveryFee").remove(),$("#totalText").text("Total: "),$("#totalText").append("<r>"+r+"</r>"),$("#totalText").after(h)):($("#deliveryFee").remove(),$("#totalText").text("Total: "),$("#totalText").append("<green>"+r+"</green>")):($("#deliveryFee").remove(),$("#totalText").text("Total: "+r)),n()}),$("#phoneNumber").change(function(){var e=$("#phoneNumber").val(),a='<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" id="good"></span>',o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad"></span>',n=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/;n.test(e)?($("#phoneCheck").removeClass("has-error has-feedback"),$("#bad").remove(),$("#good").remove(),$("#phoneCheck").addClass("has-success has-feedback"),$("#phoneCheck").append(a),c=!0):($("#phoneCheck").removeClass("has-success has-feedback"),$("#bad").remove(),$("#good").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o),c=!1)}),$("#location").change(function(){var e=$("#location").val(),a='<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" id="good2"></span>',o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad2"></span>',n=/^(?!\s*$).+/;n.test(e)?($("#locationCheck").removeClass("has-error has-feedback"),$("#bad2").remove(),$("#good2").remove(),$("#locationCheck").addClass("has-success has-feedback"),$("#locationCheck").append(a),l=!0):($("#locationCheck").removeClass("has-success has-feedback"),$("#bad2").remove(),$("#good2").remove(),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(o),l=!1)})});