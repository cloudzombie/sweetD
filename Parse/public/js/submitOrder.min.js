$(function(){function e(e,a){var o=[],s=0;for(i=0;i<e.length;i++)if(e[i]!=a[i]){var n;switch(a[i]){case"Oatmeal Raisin Cookies":case"White Chocolate Macadamia Cookies":case"Chocolate Chip Cookies":case"Condoms":case"Brownies":case"Cinnamon Rolls":n=50;break;case"Snickers":case"Twix":case"Milky Way":case"M&M's":case"Peanut M&M's":n=100;break;case"Rock Star":case"Red Bull":n=200}o[i]=parseInt(e[i].charAt(0))*n,s+=o[i]}else o[i]=0;t=s;var c=s.toString();r=s>=1e3?"$"+c.substr(0,2)+"."+c.substr(2):0==s?"$0.00":100>s?"$0."+c:"$"+c.substr(0,1)+"."+c.substr(1)}function a(e,a){var o=[],s=[],n=[];for(i=0;i<e.length;i++)if(e[i]!=a[i]){switch(o[i]=parseInt(-1*e[i].charAt(0)),a[i]){case"Chocolate Chip Cookies":s[i]="Cookie",n[i]="Cw88sZHIZy";break;case"Condoms":s[i]="Condom",n[i]="OFlBAvSjpD";break;case"Red Bull":s[i]="Drink",n[i]="yTFc0JXOV4";break;case"Snickers":s[i]="Candy",n[i]="dOWFhzLe0l";break;case"Rock Star":s[i]="Drink",n[i]="r4aIlTLQ4J";break;case"White Chocolate Macadamia Cookies":s[i]="Cookie",n[i]="kDIaQg1oF6";break;case"Oatmeal Raisin Cookies":s[i]="Cookie",n[i]="arhcAs2f1s";break;case"Brownies":s[i]="Mini",n[i]="jqlPANiXgo";break;case"Cinnamon Rolls":s[i]="Mini",n[i]="NguOjWzDvc";break;case"Twix":s[i]="Candy",n[i]="XZtg1Yebhe";break;case"Milky Way":s[i]="Candy",n[i]="ZgfMt4Gp0f";break;case"M&M's":s[i]="Candy",n[i]="C9IwFUQQOW";break;case"Peanut M&M's":s[i]="Candy",n[i]="VYrQAhuOwY"}$.post("/inventory/update",{itemType:s[i],item:a[i],changeValue:o[i],id:n[i]},function(){console.log("Inventory Updated")})}}function o(e){var a,o=" left!)</r>",i="#"+e,s="";$.get("/inventory/request",{id:e},function(e){switch(a=e.remaining,s+=e.elementId,a){case 5:o="<r> (5"+o,$(i).append(o);break;case 4:o="<r> (4"+o,$(i).append(o);break;case 3:o="<r> (3"+o,$(i).append(o);break;case 2:o="<r> (2"+o,$(i).append(o);break;case 1:o="<r> (1"+o,$(i).append(o);break;case 0:o="<r> (all gone!)</r>",$(i).append(o),$(s).attr("disabled","disabled")}})}function s(){$("#totalText").addClass("pulse animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("pulse animated")})}function n(e){e+=300;var a=e.toString();r="$"+a.substr(0,1)+"."+a.substr(1)}var r="$0.00",t=0,c=!1,l=!1,d=["Chocolate Chip Cookies","Red Bull","Snickers","Condoms","Rock Star","White Chocolate Macadamia Cookies","Oatmeal Raisin Cookies","Brownies","Cinnamon Rolls","Twix","Milky Way","M&M's","Peanut M&M's"],h=["Cw88sZHIZy","yTFc0JXOV4","dOWFhzLe0l","OFlBAvSjpD","r4aIlTLQ4J","kDIaQg1oF6","arhcAs2f1s","jqlPANiXgo","NguOjWzDvc","XZtg1Yebhe","ZgfMt4Gp0f","C9IwFUQQOW","VYrQAhuOwY"];for(i=0;i<d.length;i++)o(h[i]);$(".form").submit(function(e){e.preventDefault(),e.stopPropagation();var o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad"></span>',s='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad2"></span>',n=$("#phoneNumber").val(),t=$("#location").val(),h=$("#chipCookies").val(),p="Red Bull",k=$("#condoms").val(),v=$("#snickers").val(),m=$("#rockStars").val(),C=$("#whiteChocolate").val(),b=$("#oatmeal").val(),u=$("#brownies").val(),f=$("#cinnaRolls").val(),g=$("#twix").val(),y=$("#milkyWay").val(),w=$("#mnms").val(),M=$("#peanuts").val(),x=[h,p,v,k,m,C,b,u,f,g,y,w,M],T="";for(i=0;i<d.length;i++)d[i]!=x[i]&&(T+=x[i],i+1<d.length&&(T+=", "));c===!0&&l===!0&&T?(a(x,d),$.post("/order/new",{location:t,orderList:T,phoneNumber:n,total:r},function(){console.log("POST success")}),window.location.replace("http://heysweetd.com/thanks")):c===!1&&l===!1?(alert("Please enter a valid phone number and location!"),$("#bad").remove(),$("#bad2").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(s)):c===!1?(alert("Please enter a valid phone number!"),$("#bad").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o)):l===!1?(alert("Please enter a valid location!"),$("#bad2").remove(),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(s)):T||alert("You have no order! Please select items for delivery.")}),$("select").change(function(){var a=$("#chipCookies").val(),o="Red Bull",i=$("#condoms").val(),c=$("#snickers").val(),l=$("#rockStars").val(),h=$("#whiteChocolate").val(),p=$("#oatmeal").val(),k=$("#brownies").val(),v=$("#cinnaRolls").val(),m=$("#twix").val(),C=$("#milkyWay").val(),b=$("#mnms").val(),u=$("#peanuts").val(),f=[a,o,c,i,l,h,p,k,v,m,C,b,u],g='<p id="deliveryFee" style="margin-bottom: 20px;">Delivery fee: <r>$3.00</r></p>';e(f,d),"$0.00"!=r?500>t?(n(t),$("#deliveryFee").remove(),$("#totalText").text("Total: "),$("#totalText").append("<r>"+r+"</r>"),$("#totalText").after(g)):($("#deliveryFee").remove(),$("#totalText").text("Total: "),$("#totalText").append("<green>"+r+"</green>")):($("#deliveryFee").remove(),$("#totalText").text("Total: "+r)),s()}),$("#phoneNumber").change(function(){var e=$("#phoneNumber").val(),a='<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" id="good"></span>',o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad"></span>',i=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/;i.test(e)?($("#phoneCheck").removeClass("has-error has-feedback"),$("#bad").remove(),$("#good").remove(),$("#phoneCheck").addClass("has-success has-feedback"),$("#phoneCheck").append(a),c=!0):($("#phoneCheck").removeClass("has-success has-feedback"),$("#bad").remove(),$("#good").remove(),$("#phoneCheck").addClass("has-error has-feedback"),$("#phoneCheck").append(o),c=!1)}),$("#location").change(function(){var e=$("#location").val(),a='<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" id="good2"></span>',o='<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" id="bad2"></span>',i=/^(?!\s*$).+/;i.test(e)?($("#locationCheck").removeClass("has-error has-feedback"),$("#bad2").remove(),$("#good2").remove(),$("#locationCheck").addClass("has-success has-feedback"),$("#locationCheck").append(a),l=!0):($("#locationCheck").removeClass("has-success has-feedback"),$("#bad2").remove(),$("#good2").remove(),$("#locationCheck").addClass("has-error has-feedback"),$("#locationCheck").append(o),l=!1)})});